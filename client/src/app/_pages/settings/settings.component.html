<div class="bg-white shadow-md rounded-[15px] p-5 overflow-hidden">
  <div class="grid gap-15 overflow-hidden">
    <form class="overflow-hidden cursor-default"
    [formGroup]="formAcademicYear"
    (ngSubmit)="onSaveAcademicYear()"
    >
      <div>
        <div class="mb-4">
          <div class="flex justify-between">
            <h1 class="text-lg text-[#2f2f2f] font-bold mb-1 text-start">
              ACADEMIC&nbsp;&nbsp;YEAR&nbsp;&nbsp;2025
            </h1>
            @if (editAcademicYear)
            {
              <button mat-icon-button
              type="button"
              style="color: #19d232; font-size: 12pt; cursor: pointer;"
              matTooltip="Edit"
              [matTooltipPosition]="'left'"
              matTooltipHideDelay="50"
              (click)="onEditAcademicYear()">
                <mat-icon>edit</mat-icon>
              </button>
            }
            @else
            {
              <div class="flex items-center gap-5">
                <button class="button" type="reset" (click)="onCancelAcademicYear()">Cancel</button>
                <button class="button" type="submit">Save</button>
              </div>
            }
          </div>
          <hr class="border-slate-400">
        </div>

        @if (editAcademicYear)
        {
          <div class="flex flex-col gap-1">
            <div class="flex items-center justify-start gap-10">
              <div class="flex gap-2 text-[#2f2f2f] font-medium w-50">
                <span class="material-icons"> chevron_right </span>
                <span>Start Date</span>
              </div>

              <div class="text-[#2f2f2f]">
                <label>{{ startMonth }}</label>
                &nbsp;
                <label>{{ startDay }}</label>
                ,&nbsp;
                <label>{{ startYear }}</label>
              </div>
            </div>
            <div class="flex items-center justify-start gap-10">
              <div class="flex gap-2 text-[#2f2f2f] font-medium w-50">
                <span class="material-icons"> chevron_right </span>
                <span>End Date</span>
              </div>

              <div class="text-[#2f2f2f]">
                <label>{{ endMonth }}</label>
                &nbsp;
                <label>{{ endDay }}</label>
                ,&nbsp;
                <label>{{ endYear }}</label>
              </div>
            </div>
          </div>
        }
        @else
        {
          <div class="flex flex-col gap-2">
            <div class="flex flex-col gap-1">
              <div class="text-[#2f2f2f] font-medium ">
                <span>Start Date</span>
              </div>

              <div class="flex gap-5 w-1/2">
                <mat-form-field appearance="outline" class="w-1/2">
                  <mat-label>Month</mat-label>
                  <mat-select panelClass="scrollbar-custom"
                  formControlName="startDateMonth">
                    <mat-option *ngFor="let month of months" [value]="month">{{ month }}</mat-option>
                  </mat-select>
                  @if (getErrorFormsAcademicYear('startDateMonth')?.hasError('required')) {
                    <mat-error>Month is required</mat-error>
                  }
                </mat-form-field>

                <mat-form-field appearance="outline" class="w-1/4">
                  <mat-label>Day</mat-label>
                  <mat-select panelClass="scrollbar-custom"
                  formControlName="startDateDay">
                    <mat-option *ngFor="let day of days" [value]="day">{{ day }}</mat-option>
                  </mat-select>
                  @if (getErrorFormsAcademicYear('startDateDay')?.hasError('required')) {
                    <mat-error>Day is required</mat-error>
                  }
                </mat-form-field>

                <mat-form-field appearance="outline" class="w-1/3">
                  <mat-label>Year</mat-label>
                  <mat-select panelClass="scrollbar-custom"
                  formControlName="startDateYear">
                    <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
                  </mat-select>
                  @if (getErrorFormsAcademicYear('startDateYear')?.hasError('required')) {
                    <mat-error>Year is required</mat-error>
                  }
                </mat-form-field>
              </div>
            </div>
            <div class="flex flex-col gap-1">
              <div class="text-[#2f2f2f] font-medium ">
                <span>End Date</span>
              </div>

              <div class="flex gap-5 w-1/2">
                <mat-form-field appearance="outline" class="w-1/2">
                  <mat-label>Month</mat-label>
                  <mat-select panelClass="scrollbar-custom"
                  formControlName="endDateMonth">
                    <mat-option *ngFor="let month of months" [value]="month">{{ month }}</mat-option>
                  </mat-select>
                  @if (getErrorFormsAcademicYear('endDateMonth')?.hasError('required')) {
                    <mat-error>Month is required</mat-error>
                  }
                </mat-form-field>

                <mat-form-field appearance="outline" class="w-1/4">
                  <mat-label>Day</mat-label>
                  <mat-select panelClass="scrollbar-custom"
                  formControlName="endDateDay">
                    <mat-option *ngFor="let day of days" [value]="day">{{ day }}</mat-option>
                  </mat-select>
                  @if (getErrorFormsAcademicYear('endDateDay')?.hasError('required')) {
                    <mat-error>Day is required</mat-error>
                  }
                </mat-form-field>

                <mat-form-field appearance="outline" class="w-1/3">
                  <mat-label>Year</mat-label>
                  <mat-select panelClass="scrollbar-custom"
                  formControlName="endDateYear">
                    <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
                  </mat-select>
                  @if (getErrorFormsAcademicYear('endDateYear')?.hasError('required')) {
                    <mat-error>Year is required</mat-error>
                  }
                </mat-form-field>
              </div>
            </div>
          </div>
        }
      </div>
    </form>

    <form class="overflow-hidden cursor-default"
    [formGroup]="formCurrentFees"
    (ngSubmit)="onSaveCurrentFees()"
    >
      <div>
        <div class="mb-4">
          <div class="flex justify-between">
            <h1 class="text-lg text-[#2f2f2f] font-bold mb-1 text-start">
              CURRENT&nbsp;&nbsp;FEES
            </h1>
            @if (editCurrentFees)
            {
              <button mat-icon-button
              type="button"
              style="color: #19d232; font-size: 12pt; cursor: pointer;"
              matTooltip="Edit"
              [matTooltipPosition]="'left'"
              matTooltipHideDelay="50"
              (click)="onEditCurrentFees()">
                <mat-icon>edit</mat-icon>
              </button>
            }
            @else
            {
              <div class="flex items-center gap-5">
                <button class="button" type="reset" (click)="onCancelCurrentFees()">Cancel</button>
                <button class="button" type="submit">Save</button>
              </div>
            }
          </div>
          <hr class="border-slate-400">
        </div>

        @if (editCurrentFees)
        {
          <div class="flex gap-2">
            <div class="grid gap-1">
              <div class="flex items-center justify-between gap-10">
                <div class="flex gap-2 text-[#2f2f2f] font-medium w-50">
                  <span class="material-icons"> chevron_right </span>
                  <span>Certificate Fee</span>
                </div>

                <div class="text-[#2f2f2f]">
                  <label>{{ certificateFee }}</label>
                </div>
              </div>

              <div class="flex items-center justify-between gap-10">
                <div class="flex gap-2 text-[#2f2f2f] font-medium w-50">
                  <span class="material-icons"> chevron_right </span>
                  <span>Enrollment Fee</span>
                </div>

                <div class="text-[#2f2f2f]">
                  <label>{{ enrollmentFee }}</label>
                </div>
              </div>

              <div class="flex items-center justify-between gap-10">
                <div class="flex gap-2 text-[#2f2f2f] font-medium w-50">
                  <span class="material-icons"> chevron_right </span>
                  <span>Exam Fee</span>
                </div>

                <div class="text-[#2f2f2f]">
                  <label>{{ examFee }}</label>
                </div>
              </div>
            </div>
            <div class="grid gap-1 text-[#2f2f2f]">
              <label>MT</label>
              <label>MT</label>
              <label>MT</label>
            </div>
          </div>

          <div class="grid gap-1 my-1 w-90">
            <hr class="border-slate-400">
            <hr class="border-slate-400">
          </div>

          <div class="flex gap-2">
            <div class="grid gap-1">
              <div class="flex items-center justify-between gap-10">
                <div class="flex gap-2 text-[#2f2f2f] font-medium w-50">
                  <span class="material-icons"> chevron_right </span>
                  <span>Course Fee</span>
                </div>

                <div class="text-[#2f2f2f]">
                  <label>{{ courseFee }}</label>
                </div>
              </div>

              <div class="flex items-center justify-between gap-10">
                <div class="flex gap-2 text-[#2f2f2f] font-medium w-50">
                  <span class="material-icons"> chevron_right </span>
                  <span>Installment Plan</span>
                </div>

                <div class="text-[#2f2f2f]">
                  <label>{{ installment }}</label>
                </div>
              </div>
            </div>
            <div class="grid gap-1 text-[#2f2f2f]">
              <label>MT</label>
              <label>MT</label>
            </div>
          </div>

        }
        @else
        {
          <div class="grid">
            <div class="flex flex-col gap-0">
              <div class="text-[#2f2f2f] font-medium ">
                <span>Certificate Fee</span>
              </div>

              <div class="w-1/2">
                <mat-form-field appearance="outline" class="w-1/3">
                  <mat-label>Amount (MT)</mat-label>
                    <input matInput
                    formControlName="certificateFee"
                    type="text"
                    placeholder="0,00 MT"
                    maxlength="10000000000"
                    (input)="onAmount($event)"/>
                    @if (getErrorFormsCurrentFees('certificateFee')?.hasError('required')) {
                      <mat-error>Amount(MT) is required</mat-error>
                    }
                </mat-form-field>
              </div>
            </div>

            <div class="flex flex-col gap-0">
              <div class="text-[#2f2f2f] font-medium ">
                <span>Enrollment Fee</span>
              </div>

              <div class="w-1/2">
                <mat-form-field appearance="outline" class="w-1/3">
                  <mat-label>Amount (MT)</mat-label>
                    <input matInput
                    formControlName="enrollmentFee"
                    type="text"
                    placeholder="0,00 MT"
                    maxlength="10000000000"
                    (input)="onAmount($event)"/>
                    @if (getErrorFormsCurrentFees('enrollmentFee')?.hasError('required')) {
                      <mat-error>Amount(MT) is required</mat-error>
                    }
                </mat-form-field>
              </div>
            </div>

            <div class="flex flex-col gap-0">
              <div class="text-[#2f2f2f] font-medium ">
                <span>Exam Fee</span>
              </div>

              <div class="w-1/2">
                <mat-form-field appearance="outline" class="w-1/3">
                  <mat-label>Amount (MT)</mat-label>
                    <input matInput
                    formControlName="examFee"
                    type="text"
                    placeholder="0,00 MT"
                    maxlength="10000000000"
                    (input)="onAmount($event)"/>
                    @if (getErrorFormsCurrentFees('examFee')?.hasError('required')) {
                      <mat-error>Amount(MT) is required</mat-error>
                    }
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="grid gap-1 mb-3 w-50">
            <hr class="border-slate-400">
            <hr class="border-slate-400">
          </div>
          <div class="grid">
            <div class="flex flex-col gap-0">
              <div class="text-[#2f2f2f] font-medium ">
                <span>Course Fee</span>
              </div>

              <div class="w-1/2">
                <mat-form-field appearance="outline" class="w-1/3">
                  <mat-label>Amount (MT)</mat-label>
                    <input matInput
                    formControlName="courseFee"
                    type="text"
                    placeholder="0,00 MT"
                    maxlength="10000000000"
                    (input)="onAmount($event)"/>
                    @if (getErrorFormsCurrentFees('courseFee')?.hasError('required')) {
                      <mat-error>Amount(MT) is required</mat-error>
                    }
                </mat-form-field>
              </div>
            </div>

            <div class="flex flex-col gap-0">
              <div class="text-[#2f2f2f] font-medium ">
                <span>Installment Plan</span>
              </div>

              <div class="w-1/2">
                <mat-form-field appearance="outline" class="w-1/3">
                  <mat-label>Amount (MT)</mat-label>
                    <input matInput
                    formControlName="installment"
                    type="text"
                    placeholder="0,00 MT"
                    maxlength="10000000000"
                    (input)="onAmount($event)"/>
                    @if (getErrorFormsCurrentFees('installment')?.hasError('required')) {
                      <mat-error>Amount(MT) is required</mat-error>
                    }
                </mat-form-field>
              </div>
            </div>
          </div>
        }
      </div>
    </form>

    <div class="overflow-hidden cursor-default">
      <div class="mb-4">
        <div class="flex justify-between">
            <h1 class="text-lg text-[#2f2f2f] font-bold mb-1 text-start">
              MONTHLY&nbsp;&nbsp;TUITION (BY LEVEL)
            </h1>
            @if (editMonthlyTuition)
            {
              <button mat-icon-button
              type="button"
              style="color: #19d232; font-size: 12pt; cursor: pointer;"
              matTooltip="Edit"
              [matTooltipPosition]="'left'"
              matTooltipHideDelay="50"
              (click)="onEditMonthlyTuition()">
                <mat-icon>edit</mat-icon>
              </button>
            }
            @else
            {
              <div class="flex items-center gap-5">
                <button class="button" type="reset" (click)="onCancelMonthlyTuition()">Cancel</button>
                <button class="button" (click)="onSaveMonthlyTuition()">Save</button>
              </div>
            }
          </div>
          <hr class="border-slate-400">
        </div>

        @if (editMonthlyTuition)
        {
          <div class="grid gap-4 w-[60%]">
            <div>
              <h1 class="text-lg text-gray-600 font-bold text-center mb-4">
                IN-PERSON
              </h1>
              <table mat-table [dataSource]="rowDataMonthlyInPerson" class="mat-elevation-z8 demo-table">

                <ng-container matColumnDef="id">
                  <th mat-header-cell *matHeaderCellDef><p class="text-center">Level</p></th>
                  <td mat-cell *matCellDef="let element" class="font-medium">
                    <p class="text-center">
                      {{ convertLevel(element.id) }}
                    </p>
                  </td>
                </ng-container>


                <ng-container matColumnDef="intensive">
                  <th mat-header-cell *matHeaderCellDef>
                    <p class="text-center">Intensive (MT)</p>
                  </th>
                  <td mat-cell *matCellDef="let element">
                    @if (element.intensive === 0)
                    {
                      <p class="text-center">
                        {{ formatAmount(element.intensive) }}
                      </p>
                    }
                    @else
                    {
                      <p class="text-right pr-10">
                        {{ formatAmount(element.intensive) }}
                      </p>
                    }
                  </td>
                </ng-container>

                <ng-container matColumnDef="private">
                  <th mat-header-cell *matHeaderCellDef>
                    <p class="text-center">Private (MT)</p>
                  </th>
                  <td mat-cell *matCellDef="let element">
                    @if (element.private === 0)
                    {
                      <p class="text-center">
                        {{ formatAmount(element.private) }}
                      </p>
                    }
                    @else
                    {
                      <p class="text-right pr-10">
                        {{ formatAmount(element.private) }}
                      </p>
                    }
                  </td>
                </ng-container>

                <ng-container matColumnDef="regular">
                  <th mat-header-cell *matHeaderCellDef>
                    <p class="text-center">Regular (MT)</p>
                  </th>
                  <td mat-cell *matCellDef="let element">
                    @if (element.regular === 0)
                    {
                      <p class="text-center">
                        {{ formatAmount(element.regular) }}
                      </p>
                    }
                    @else
                    {
                      <p class="text-right pr-10">
                        {{ formatAmount(element.regular) }}
                      </p>
                    }
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns;"
                ></tr>
              </table>
            </div>
            <div class="grid gap-1">
              <hr class="border-slate-400">
              <hr class="border-slate-400">
            </div>
            <div>
              <h1 class="text-lg text-gray-600 font-bold text-center mb-4">
                ONLINE
              </h1>
              <table mat-table [dataSource]="rowDataMonthlyOnline" class="mat-elevation-z8 demo-table">

                <ng-container matColumnDef="id">
                  <th mat-header-cell *matHeaderCellDef><p class="text-center">Level</p></th>
                  <td mat-cell *matCellDef="let element" class="font-medium">
                    <p class="text-center">
                      {{ convertLevel(element.id) }}
                    </p>
                  </td>
                </ng-container>


                <ng-container matColumnDef="intensive">
                  <th mat-header-cell *matHeaderCellDef>
                    <p class="text-center">Intensive (MT)</p>
                  </th>
                  <td mat-cell *matCellDef="let element">
                    @if (element.intensive === 0)
                    {
                      <p class="text-center">
                        {{ formatAmount(element.intensive) }}
                      </p>
                    }
                    @else
                    {
                      <p class="text-right pr-10">
                        {{ formatAmount(element.intensive) }}
                      </p>
                    }
                  </td>
                </ng-container>

                <ng-container matColumnDef="private">
                  <th mat-header-cell *matHeaderCellDef>
                    <p class="text-center">Private (MT)</p>
                  </th>
                  <td mat-cell *matCellDef="let element">
                    @if (element.private === 0)
                    {
                      <p class="text-center">
                        {{ formatAmount(element.private) }}
                      </p>
                    }
                    @else
                    {
                      <p class="text-right pr-10">
                        {{ formatAmount(element.private) }}
                      </p>
                    }
                  </td>
                </ng-container>

                <ng-container matColumnDef="regular">
                  <th mat-header-cell *matHeaderCellDef>
                    <p class="text-center">Regular (MT)</p>
                  </th>
                  <td mat-cell *matCellDef="let element">
                    @if (element.regular === 0)
                    {
                      <p class="text-center">
                        {{ formatAmount(element.regular) }}
                      </p>
                    }
                    @else
                    {
                      <p class="text-right pr-10">
                        {{ formatAmount(element.regular) }}
                      </p>
                    }
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns;"
                ></tr>
              </table>
            </div>
          </div>
        }
        @else
        {
          <div class="grid gap-7">
            <div class="w-[60%]">
              <h1 class="text-lg text-gray-600 font-bold mb-1 text-center w-full mb-5">
                IN-PERSON
              </h1>
              <ag-grid-angular
                class="ag-theme-alpine custom-scrollbar w-full h-full overflow-hidden"
                [rowData]="rowDataMonthlyInPerson"
                [columnDefs]="colDefsMonthlyTuition"
                [domLayout]="'autoHeight'"
                [pagination]="false"
                [headerHeight]="50"
                [rowHeight]="40"
                [rowSelection]="rowSelection"
                [gridOptions]="gridOptionsInPerson"
                >
              </ag-grid-angular>
            </div>

            <div class="grid justify-start gap-1">
              <hr class="border-slate-400 w-175">
              <hr class="border-slate-400 w-175">
            </div>
            <div class="w-[60%]">
              <h1 class="text-lg text-gray-600 font-bold mb-1 text-center w-full mb-5">
                  ONLINE
              </h1>
              <ag-grid-angular
                  class="ag-theme-alpine custom-scrollbar w-full h-full overflow-hidden"
                  [rowData]="rowDataMonthlyOnline"
                  [columnDefs]="colDefsMonthlyTuition"
                  [domLayout]="'autoHeight'"
                  [pagination]="false"
                  [headerHeight]="50"
                  [rowHeight]="40"
                  [rowSelection]="rowSelection"
                  [gridOptions]="gridOptionsOnline"
                  >
                </ag-grid-angular>
            </div>
          </div>
        }
      </div>

    <form class="overflow-hidden cursor-default"
    [formGroup]="formSchedule"
    (ngSubmit)="onNewWeeklySchedule()"
    #weeklyScheduleFormRef
    >
      <div>
        <div class="mb-4">
          <div class="flex justify-between">
            <h1 class="text-lg text-[#2f2f2f] font-bold mb-1 text-start">
              WEEKLY&nbsp;&nbsp;SCHEDULE
            </h1>
            @if (editWeeklySchedule)
            {
              <button mat-icon-button
              type="button"
              style="color: #19d232; font-size: 12pt; cursor: pointer;"
              matTooltip="Edit"
              [matTooltipPosition]="'left'"
              matTooltipHideDelay="50"
              (click)="onEditWeeklySchedule()">
                <mat-icon>edit</mat-icon>
              </button>
            }
            @else
            {
              <div class="flex items-center gap-5">
                <button class="button" type="reset" (click)="onCancelWeeklySchedule()">Cancel</button>
                <button class="button" type="submit">Save</button>
              </div>
            }
          </div>
          <hr class="border-slate-400">
        </div>

        @if (editWeeklySchedule)
        {

            <table mat-table [dataSource]="weeklySchedule" class="mat-elevation-z8 demo-table">

              <ng-container matColumnDef="monday">
                <th mat-header-cell *matHeaderCellDef><p class="text-center font-bold">Monday</p></th>
                <td mat-cell *matCellDef="let element"><p class="text-center">{{element.monday}}</p></td>
              </ng-container>


              <ng-container matColumnDef="tuesday">
                <th mat-header-cell *matHeaderCellDef>
                  <p class="text-center font-bold">Tuesday</p>
                </th>
                <td mat-cell *matCellDef="let element"><p class="text-center">{{element.tuesday}}</p></td>
              </ng-container>

              <ng-container matColumnDef="wednesday">
                <th mat-header-cell *matHeaderCellDef>
                  <p class="text-center font-bold">Wenesday</p>
                </th>
                <td mat-cell *matCellDef="let element"><p class="text-center">{{element.wednesday}}</p></td>
              </ng-container>

              <ng-container matColumnDef="thursday">
                <th mat-header-cell *matHeaderCellDef>
                  <p class="text-center font-bold">Thursday</p>
                </th>
                <td mat-cell *matCellDef="let element"><p class="text-center">{{element.thursday}}</p></td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumnsWeeklySchedule"></tr>
              <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumnsWeeklySchedule;"
              ></tr>
            </table>
        }
        @else
        {
          <div class="w-full flex justify-end items-center mb-1">
          </div>
          <div class="flex gap-8 w-full">
            <mat-form-field appearance="outline" class="w-1/2">
              <mat-label>Monday</mat-label>
              <mat-select panelClass="scrollbar-custom"
              formControlName="monday">
                <mat-option *ngFor="let schedule of schedules" [value]="schedule">{{ schedule }}</mat-option>
              </mat-select>
              @if (getErrorFormsWeeklySchedule('monday')?.hasError('required')) {
                <mat-error>This field is required</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-1/2">
              <mat-label>Tuesday</mat-label>
              <mat-select panelClass="scrollbar-custom"
              formControlName="tuesday">
                <mat-option *ngFor="let schedule of schedules" [value]="schedule">{{ schedule }}</mat-option>
              </mat-select>
              @if (getErrorFormsWeeklySchedule('tuesday')?.hasError('required')) {
                <mat-error>This field is required</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-1/2">
              <mat-label>Wednesday</mat-label>
              <mat-select panelClass="scrollbar-custom"
              formControlName="wednesday">
                <mat-option *ngFor="let schedule of schedules" [value]="schedule">{{ schedule }}</mat-option>
              </mat-select>
              @if (getErrorFormsWeeklySchedule('wednesday')?.hasError('required')) {
                <mat-error>This field is required</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-1/2">
              <mat-label>Thursday</mat-label>
              <mat-select panelClass="scrollbar-custom"
              formControlName="thursday">
                <mat-option *ngFor="let schedule of schedules" [value]="schedule">{{ schedule }}</mat-option>
              </mat-select>
              @if (getErrorFormsWeeklySchedule('thursday')?.hasError('required')) {
                <mat-error>This field is required</mat-error>
              }
            </mat-form-field>
          </div>

          <div>
            <ag-grid-angular
              class="ag-theme-alpine custom-scrollbar w-full h-full overflow-hidden"
              [rowData]="rowData"
              [columnDefs]="columnDefsAction"
              [domLayout]="'autoHeight'"
              [pagination]="false"
              [headerHeight]="50"
              [rowHeight]="40"
              [rowSelection]="rowSelection"
              >
            </ag-grid-angular>
          </div>
        }
      </div>
    </form>
  </div>
</div>
