<div class="w-full flex justify-center">
  <div class="bg-white shadow-md rounded-[15px] p-5 overflow-hidden w-[90%]">
    <div class="mb-4">
      <div class="flex justify-between">
        <h1 class="text-lg text-[#2f2f2f] font-bold mb-1 text-start">
          RAMADAN IBRAIMO ISMAEL
        </h1>
        @if (editStudentDetailsQuizzes)
        {
          <button mat-icon-button [matMenuTriggerFor]="menu" class="text-gray-600 cursor-pointer">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu">
            <button (click)="onEditQuizzesExam()"
            mat-menu-item
            >
              <mat-icon>edit</mat-icon>
              <span>Edit</span>
            </button>
            <button
            mat-menu-item
            >
              <mat-icon>task_alt</mat-icon>
              <span>Mark as Completed</span>
            </button>
            <button
            mat-menu-item
            >
              <mat-icon>block</mat-icon>
              <span>Mark as Inactive</span>
            </button>
          </mat-menu>
        }
        @else
        {
          <div class="flex items-center gap-5">
            <button class="button" type="reset" (click)="onCancelQuizzesExam()">Cancel</button>
            <button class="button" type="submit">Save</button>
            <span matTooltip="You can only edit the fields: Quiz 1, Quiz 2, and Exam. All other fields are read-only."
            [matTooltipPosition]="position.value!"
            matTooltipHideDelay="50"
            style="color: #0099ff; font-size: 12pt; cursor: default;"
            >
              <mat-icon>info</mat-icon>
            </span>
          </div>
        }
      </div>
      <hr class="border-slate-400">
    </div>

    @if (editStudentDetailsQuizzes)
    {
      <div class="w-full">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 demo-table">

          <ng-container matColumnDef="level">
            <th mat-header-cell *matHeaderCellDef><p class="text-center">Level</p></th>
            <td mat-cell *matCellDef="let element" class="font-medium"><p class="text-center">
              {{element.level}}
            </p></td>
          </ng-container>


          <ng-container matColumnDef="quizOne">
            <th mat-header-cell *matHeaderCellDef>
              <p class="text-center">Quiz 1</p>
            </th>
            <td mat-cell *matCellDef="let element"><p class="text-center">
              {{element.quizOne}}
            </p></td>
          </ng-container>

          <ng-container matColumnDef="quizTwo">
            <th mat-header-cell *matHeaderCellDef>
              <p class="text-center">Quiz 2</p>
            </th>
            <td mat-cell *matCellDef="let element"><p class="text-center">
              {{element.quizTwo}}
            </p></td>
          </ng-container>

          <ng-container matColumnDef="exam">
            <th mat-header-cell *matHeaderCellDef>
              <p class="text-center">Exam</p>
            </th>
            <td mat-cell *matCellDef="let element"><p class="text-center">
              {{element.exam}}
            </p></td>
          </ng-container>

          <ng-container matColumnDef="finalAverage">
            <th mat-header-cell *matHeaderCellDef>
              <p class="text-center">Final Average</p>
            </th>
            <td mat-cell *matCellDef="let element"><p class="text-center">
              {{element.finalAverage}}
            </p></td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>
              <p class="text-center">Status</p>
            </th>
            <td mat-cell *matCellDef="let element"><p class="text-center">
              {{element.status}}
            </p></td>
          </ng-container>

          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>
              <p class="text-center">Date</p>
            </th>
            <td mat-cell *matCellDef="let element"><p class="text-center">
              {{element.date}}
            </p></td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
              mat-row
              *matRowDef="let row; columns: displayedColumns;"
          ></tr>
        </table>
      </div>
    }
    @else
    {
      <div class="grid gap-7">
        <div class="w-full">
          <ag-grid-angular
            class="ag-theme-alpine custom-scrollbar w-full h-full overflow-hidden"
            [rowData]="dataSource"
            [columnDefs]="columnDefsQuizzesExamEdit"
            [domLayout]="'autoHeight'"
            [pagination]="false"
            [headerHeight]="50"
            [rowHeight]="50"
            [rowSelection]="rowSelection"
            >
          </ag-grid-angular>
        </div>
      </div>
    }
  </div>
</div>
